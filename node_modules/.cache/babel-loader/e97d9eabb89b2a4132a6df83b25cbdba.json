{"ast":null,"code":"\"use strict\";\n/* eslint-disable */\n\nclass DiscordRESTError extends Error {\n  constructor(req, res, response, stack) {\n    super();\n    Object.defineProperty(this, \"req\", {\n      enumerable: false,\n      value: req,\n      writable: false\n    });\n    Object.defineProperty(this, \"res\", {\n      enumerable: false,\n      value: res,\n      writable: false\n    });\n    Object.defineProperty(this, \"response\", {\n      enumerable: false,\n      value: response,\n      writable: false\n    });\n    Object.defineProperty(this, \"code\", {\n      value: +response.code || -1,\n      writable: false\n    });\n    let message = this.name + \": \" + (response.message || \"Unknown error\");\n\n    if (response.errors) {\n      message += \"\\n  \" + this.flattenErrors(response.errors).join(\"\\n  \");\n    } else {\n      const errors = this.flattenErrors(response);\n\n      if (errors.length > 0) {\n        message += \"\\n  \" + errors.join(\"\\n  \");\n      }\n    }\n\n    Object.defineProperty(this, \"message\", {\n      value: message,\n      writable: false\n    });\n\n    if (stack) {\n      Object.defineProperty(this, \"stack\", {\n        value: this.message + \"\\n\" + stack,\n        writable: false\n      });\n    } else {\n      Error.captureStackTrace(this, DiscordRESTError);\n    }\n  }\n\n  get name() {\n    return `${this.constructor.name} [${this.code}]`;\n  }\n\n  flattenErrors(errors, keyPrefix = \"\") {\n    let messages = [];\n\n    for (const fieldName in errors) {\n      if (!errors.hasOwnProperty(fieldName) || fieldName === \"message\" || fieldName === \"code\") {\n        continue;\n      }\n\n      if (errors[fieldName]._errors) {\n        messages = messages.concat(errors[fieldName]._errors.map(obj => `${keyPrefix + fieldName}: ${obj.message}`));\n      } else if (Array.isArray(errors[fieldName])) {\n        messages = messages.concat(errors[fieldName].map(str => `${keyPrefix + fieldName}: ${str}`));\n      } else if (typeof errors[fieldName] === \"object\") {\n        messages = messages.concat(this.flattenErrors(errors[fieldName], keyPrefix + fieldName + \".\"));\n      }\n    }\n\n    return messages;\n  }\n\n}\n\nmodule.exports = DiscordRESTError;","map":{"version":3,"sources":["C:/Users/Romas/astro/node_modules/discord-oauth2/lib/eris/errors/DiscordRESTError.js"],"names":["DiscordRESTError","Error","constructor","req","res","response","stack","Object","defineProperty","enumerable","value","writable","code","message","name","errors","flattenErrors","join","length","captureStackTrace","keyPrefix","messages","fieldName","hasOwnProperty","_errors","concat","map","obj","Array","isArray","str","module","exports"],"mappings":"AAAA;AAEA;;AACA,MAAMA,gBAAN,SAA+BC,KAA/B,CAAqC;AACjCC,EAAAA,WAAW,CAACC,GAAD,EAAMC,GAAN,EAAWC,QAAX,EAAqBC,KAArB,EAA4B;AACnC;AAEAC,IAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,KAA5B,EAAmC;AAC/BC,MAAAA,UAAU,EAAE,KADmB;AAE/BC,MAAAA,KAAK,EAAEP,GAFwB;AAG/BQ,MAAAA,QAAQ,EAAE;AAHqB,KAAnC;AAKAJ,IAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,KAA5B,EAAmC;AAC/BC,MAAAA,UAAU,EAAE,KADmB;AAE/BC,MAAAA,KAAK,EAAEN,GAFwB;AAG/BO,MAAAA,QAAQ,EAAE;AAHqB,KAAnC;AAKAJ,IAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,UAA5B,EAAwC;AACpCC,MAAAA,UAAU,EAAE,KADwB;AAEpCC,MAAAA,KAAK,EAAEL,QAF6B;AAGpCM,MAAAA,QAAQ,EAAE;AAH0B,KAAxC;AAMAJ,IAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,MAA5B,EAAoC;AAChCE,MAAAA,KAAK,EAAE,CAACL,QAAQ,CAACO,IAAV,IAAkB,CAAC,CADM;AAEhCD,MAAAA,QAAQ,EAAE;AAFsB,KAApC;AAKA,QAAIE,OAAO,GAAG,KAAKC,IAAL,GAAY,IAAZ,IAAoBT,QAAQ,CAACQ,OAAT,IAAoB,eAAxC,CAAd;;AACA,QAAGR,QAAQ,CAACU,MAAZ,EAAoB;AAChBF,MAAAA,OAAO,IAAI,SAAS,KAAKG,aAAL,CAAmBX,QAAQ,CAACU,MAA5B,EAAoCE,IAApC,CAAyC,MAAzC,CAApB;AACH,KAFD,MAEO;AACH,YAAMF,MAAM,GAAG,KAAKC,aAAL,CAAmBX,QAAnB,CAAf;;AACA,UAAGU,MAAM,CAACG,MAAP,GAAgB,CAAnB,EAAsB;AAClBL,QAAAA,OAAO,IAAI,SAASE,MAAM,CAACE,IAAP,CAAY,MAAZ,CAApB;AACH;AACJ;;AACDV,IAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,SAA5B,EAAuC;AACnCE,MAAAA,KAAK,EAAEG,OAD4B;AAEnCF,MAAAA,QAAQ,EAAE;AAFyB,KAAvC;;AAKA,QAAGL,KAAH,EAAU;AACNC,MAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,OAA5B,EAAqC;AACjCE,QAAAA,KAAK,EAAE,KAAKG,OAAL,GAAe,IAAf,GAAsBP,KADI;AAEjCK,QAAAA,QAAQ,EAAE;AAFuB,OAArC;AAIH,KALD,MAKO;AACHV,MAAAA,KAAK,CAACkB,iBAAN,CAAwB,IAAxB,EAA8BnB,gBAA9B;AACH;AACJ;;AAED,MAAIc,IAAJ,GAAW;AACP,WAAQ,GAAE,KAAKZ,WAAL,CAAiBY,IAAK,KAAI,KAAKF,IAAK,GAA9C;AACH;;AAEDI,EAAAA,aAAa,CAACD,MAAD,EAASK,SAAS,GAAG,EAArB,EAAyB;AAClC,QAAIC,QAAQ,GAAG,EAAf;;AACA,SAAI,MAAMC,SAAV,IAAuBP,MAAvB,EAA+B;AAC3B,UAAG,CAACA,MAAM,CAACQ,cAAP,CAAsBD,SAAtB,CAAD,IAAqCA,SAAS,KAAK,SAAnD,IAAgEA,SAAS,KAAK,MAAjF,EAAyF;AACrF;AACH;;AACD,UAAGP,MAAM,CAACO,SAAD,CAAN,CAAkBE,OAArB,EAA8B;AAC1BH,QAAAA,QAAQ,GAAGA,QAAQ,CAACI,MAAT,CAAgBV,MAAM,CAACO,SAAD,CAAN,CAAkBE,OAAlB,CAA0BE,GAA1B,CAA+BC,GAAD,IAAU,GAAEP,SAAS,GAAGE,SAAU,KAAIK,GAAG,CAACd,OAAQ,EAAhF,CAAhB,CAAX;AACH,OAFD,MAEO,IAAGe,KAAK,CAACC,OAAN,CAAcd,MAAM,CAACO,SAAD,CAApB,CAAH,EAAqC;AACxCD,QAAAA,QAAQ,GAAGA,QAAQ,CAACI,MAAT,CAAgBV,MAAM,CAACO,SAAD,CAAN,CAAkBI,GAAlB,CAAuBI,GAAD,IAAU,GAAEV,SAAS,GAAGE,SAAU,KAAIQ,GAAI,EAAhE,CAAhB,CAAX;AACH,OAFM,MAEA,IAAG,OAAOf,MAAM,CAACO,SAAD,CAAb,KAA6B,QAAhC,EAA0C;AAC7CD,QAAAA,QAAQ,GAAGA,QAAQ,CAACI,MAAT,CAAgB,KAAKT,aAAL,CAAmBD,MAAM,CAACO,SAAD,CAAzB,EAAsCF,SAAS,GAAGE,SAAZ,GAAwB,GAA9D,CAAhB,CAAX;AACH;AACJ;;AACD,WAAOD,QAAP;AACH;;AApEgC;;AAuErCU,MAAM,CAACC,OAAP,GAAiBhC,gBAAjB","sourcesContent":["\"use strict\";\r\n\r\n/* eslint-disable */\r\nclass DiscordRESTError extends Error {\r\n    constructor(req, res, response, stack) {\r\n        super();\r\n\r\n        Object.defineProperty(this, \"req\", {\r\n            enumerable: false,\r\n            value: req,\r\n            writable: false\r\n        });\r\n        Object.defineProperty(this, \"res\", {\r\n            enumerable: false,\r\n            value: res,\r\n            writable: false\r\n        });\r\n        Object.defineProperty(this, \"response\", {\r\n            enumerable: false,\r\n            value: response,\r\n            writable: false\r\n        });\r\n\r\n        Object.defineProperty(this, \"code\", {\r\n            value: +response.code || -1,\r\n            writable: false\r\n        });\r\n\r\n        let message = this.name + \": \" + (response.message || \"Unknown error\");\r\n        if(response.errors) {\r\n            message += \"\\n  \" + this.flattenErrors(response.errors).join(\"\\n  \");\r\n        } else {\r\n            const errors = this.flattenErrors(response);\r\n            if(errors.length > 0) {\r\n                message += \"\\n  \" + errors.join(\"\\n  \");\r\n            }\r\n        }\r\n        Object.defineProperty(this, \"message\", {\r\n            value: message,\r\n            writable: false\r\n        });\r\n\r\n        if(stack) {\r\n            Object.defineProperty(this, \"stack\", {\r\n                value: this.message + \"\\n\" + stack,\r\n                writable: false\r\n            });\r\n        } else {\r\n            Error.captureStackTrace(this, DiscordRESTError);\r\n        }\r\n    }\r\n\r\n    get name() {\r\n        return `${this.constructor.name} [${this.code}]`;\r\n    }\r\n\r\n    flattenErrors(errors, keyPrefix = \"\") {\r\n        let messages = [];\r\n        for(const fieldName in errors) {\r\n            if(!errors.hasOwnProperty(fieldName) || fieldName === \"message\" || fieldName === \"code\") {\r\n                continue;\r\n            }\r\n            if(errors[fieldName]._errors) {\r\n                messages = messages.concat(errors[fieldName]._errors.map((obj) => `${keyPrefix + fieldName}: ${obj.message}`));\r\n            } else if(Array.isArray(errors[fieldName])) {\r\n                messages = messages.concat(errors[fieldName].map((str) => `${keyPrefix + fieldName}: ${str}`));\r\n            } else if(typeof errors[fieldName] === \"object\") {\r\n                messages = messages.concat(this.flattenErrors(errors[fieldName], keyPrefix + fieldName + \".\"));\r\n            }\r\n        }\r\n        return messages;\r\n    }\r\n}\r\n\r\nmodule.exports = DiscordRESTError;\r\n"]},"metadata":{},"sourceType":"script"}